git:
  autocommit: false
  pagers:
    - colorArg: always
      pager: delta --paging=never --true-color=auto --dark --side-by-side --line-numbers
gui:
  # ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ï¼ˆvim/tmuxã¨çµ±ä¸€ï¼‰
  theme:
    activeBorderColor:
      - '#ff8700' # ã‚ªãƒ¬ãƒ³ã‚¸ï¼ˆANSI 208ç›¸å½“ï¼‰
      - bold
    inactiveBorderColor:
      - '#6c6c6c' # ã‚°ãƒ¬ãƒ¼
    selectedLineBgColor:
      - '#3a3a3a' # ãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼èƒŒæ™¯
    selectedRangeBgColor:
      - '#3a3a3a'
    cherryPickedCommitBgColor:
      - '#ff8700'
    cherryPickedCommitFgColor:
      - '#000000'
    unstagedChangesColor:
      - '#ff8700' # ã‚ªãƒ¬ãƒ³ã‚¸
  # ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚º
  screenMode: 'normal'
  scrollHeight: 2
  scrollPastBottom: true
  mouseEvents: true
  skipStashWarning: false
  showFileTree: true
  showListFooter: true
  showRandomTip: false
  showBranchCommitHash: true
  showBottomLine: true
  showPanelJumps: true
  showCommandLog: false
  showIcons: true
  nerdFontsVersion: "3"
  # ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é•·
  commitLength:
    show: true
  # ã‚¹ã‚­ãƒƒãƒ—è¨­å®š
  skipRewordInEditorWarning: false
  skipNoStagedFilesWarning: false
  skipDiscardChangeWarning: false
customCommands:
  - key: 'A'
    context: 'files'
    description: 'AIç”Ÿæˆã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚³ãƒŸãƒƒãƒˆ'
    prompts:
      - type: 'menuFromCommand'
        title: 'CodexãŒç”Ÿæˆã—ãŸã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é¸æŠ'
        key: 'Msg'
        command: 'sh -c "(echo \"ğŸ¤– Codex (gpt-5.1-codex) ã§ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆä¸­...\" >&2; git diff --staged 2>/dev/null | head -c 10000 | codex exec -m gpt-5.1-codex \"ã“ã®git diffã‚’åˆ†æã—ã¦ã€é©åˆ‡ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ—¥æœ¬èªã§3ã¤ææ¡ˆã—ã¦ãã ã•ã„ã€‚Conventional Commitsã®å½¢å¼ï¼ˆfeat:, fix:, refactor: ãªã©ï¼‰ã§ã€ã‚¹ã‚³ãƒ¼ãƒ—ã¯å«ã‚ãš type: description ã®å½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚å„ææ¡ˆã¯1è¡Œãšã¤ã€ç•ªå·ã‚„èª¬æ˜ãªã—ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\" 2>/dev/null | grep -E \"^(feat|fix|refactor|docs|test|chore|style|perf):\" | head -3)"'
      - type: 'input'
        title: 'ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ (å¿…è¦ã«å¿œã˜ã¦ç·¨é›†)'
        key: 'EditedMsg'
        initialValue: '{{ .Form.Msg }}'
    command: 'git commit -m "{{ .Form.EditedMsg }}"'
    loadingText: 'ã‚³ãƒŸãƒƒãƒˆä¸­...'
    output: terminal
  - key: 'n'
    context: 'worktrees'
    description: 'å‘½åè¦å‰‡ã«å¾“ã£ã¦Worktreeã‚’ä½œæˆ'
    prompts:
      - type: 'input'
        title: 'ãƒ–ãƒ©ãƒ³ãƒåã‚’å…¥åŠ› (ä¾‹: feature/new-feature)'
        key: 'TaskName'
    command: |
      # ç¾åœ¨ã®ãƒªãƒã‚¸ãƒˆãƒªåï¼ˆãƒ•ã‚©ãƒ«ãƒ€åï¼‰ã‚’å–å¾—
      REPO_NAME=$(basename $(git rev-parse --show-toplevel))

      # ãƒ–ãƒ©ãƒ³ãƒåã®ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚’ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã«ç½®æ›
      TASK_NAME_SAFE="{{ .Form.TaskName }}"
      TASK_NAME_SAFE="${TASK_NAME_SAFE//\//_}"

      # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’æ§‹ç¯‰: ../[repo]_worktree_[task]
      # ä¾‹: feature/test â†’ project_repository_worktree_feature_test
      DIR_NAME="../${REPO_NAME}_worktree_${TASK_NAME_SAFE}"

      # worktreeã‚’ä½œæˆ
      # -b ã§å…¥åŠ›ã—ãŸä½œæ¥­åã¨åŒã˜åå‰ã®ãƒ–ãƒ©ãƒ³ãƒã‚‚åŒæ™‚ã«ä½œæˆã—ã¾ã™
      git worktree add -b "{{ .Form.TaskName }}" "$DIR_NAME"

      # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—ã‚’åˆ¤å®šã—ã¦é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ§‹ç¯‰ï¼ˆè¿½è¨˜å‹ã€ãƒ¢ãƒãƒªãƒå¯¾å¿œï¼‰
      EXCLUDE_PATTERN='\.DS_Store$'  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé™¤å¤–

      ## Unityãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¤å®šï¼ˆã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚æ¤œç´¢ï¼‰
      ### é™¤å¤–å¯¾è±¡: Library/ï¼ˆãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰, Temp/, Logs/, .csproj, .sln
      if find . -maxdepth 3 -type d \( -name "Assets" -o -name "ProjectSettings" \) 2>/dev/null | grep -q .; then
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/Library/"
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/Temp/"
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/Logs/"
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|\.csproj$"
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|\.sln$"
      fi

      ## Node.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¤å®š
      ### é™¤å¤–å¯¾è±¡: node_modules/, dist/, build/
      if find . -maxdepth 3 -name "package.json" 2>/dev/null | grep -q .; then
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/node_modules/"
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/dist/"
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/build/"
      fi

      ## Goãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¤å®š
      ### é™¤å¤–å¯¾è±¡: vendor/
      if find . -maxdepth 3 -name "go.mod" 2>/dev/null | grep -q .; then
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/vendor/"
      fi

      ## Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¤å®š
      ### é™¤å¤–å¯¾è±¡: target/
      if find . -maxdepth 3 -name "Cargo.toml" 2>/dev/null | grep -q .; then
        EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|/target/"
      fi

      ## å…±é€šé™¤å¤–ï¼ˆå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
      ### é™¤å¤–å¯¾è±¡: .log ãƒ•ã‚¡ã‚¤ãƒ«
      EXCLUDE_PATTERN="${EXCLUDE_PATTERN}|\.log$"

      # ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¦ã„ãªã„ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—åˆ¥ã«é™¤å¤–ï¼‰
      # core.quotePath=false ã§æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«åã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚’ç„¡åŠ¹åŒ–

      # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã‚’ä½œæˆ
      TEMP_FILE="/tmp/worktree_files_$$.txt"

      git -c core.quotePath=false ls-files --others --exclude-standard > "$TEMP_FILE"   # untracked (gitignore ã•ã‚Œã¦ã„ãªã„æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«)
      git -c core.quotePath=false ls-files --others -i --exclude-standard >> "$TEMP_FILE"  # gitignore ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
      git -c core.quotePath=false ls-files -m >> "$TEMP_FILE"                             # modified (unstaged)
      git -c core.quotePath=false diff --cached --name-only >> "$TEMP_FILE"               # staged

      # ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿ã‚³ãƒ”ãƒ¼
      if [ -s "$TEMP_FILE" ]; then
        cat "$TEMP_FILE" | sort -u | grep -v -E "$EXCLUDE_PATTERN" | \
          rsync -a --files-from=- . "$DIR_NAME/" 2>/dev/null || true
      fi

      rm -f "$TEMP_FILE"
    loadingText: 'Worktreeã‚’ä½œæˆä¸­...'
# Conventional Commitsãƒ—ãƒªã‚»ãƒƒãƒˆ
os:
  editPreset: 'nvim'
# æ›´æ–°ãƒã‚§ãƒƒã‚¯ç„¡åŠ¹åŒ–ï¼ˆdotfilesã§ç®¡ç†ã™ã‚‹ãŸã‚ï¼‰
update:
  method: 'never'
# ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ¢ãƒ¼ãƒ‰
refresher:
  refreshInterval: 10
  fetchInterval: 60
