# prefix
set-option -g prefix C-t
bind-key C-t send-prefix
unbind-key C-b

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç•ªå·1ã‹ã‚‰é–‹å§‹ã™ã‚‹
set-option -g base-index 1

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å±¥æ­´ã®æœ€å¤§è¡Œæ•°
set-option -g history-limit 10000

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚’ãƒˆãƒƒãƒ—ã«é…ç½®ã™ã‚‹
set-option -g status-position top

# å·¦å³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®é•·ã•ã‚’æ±ºå®šã™ã‚‹
set-option -g status-left-length 90
set-option -g status-right-length 120

# #H => ãƒã‚·ãƒ³å
# #P => ãƒšã‚¤ãƒ³ç•ªå·
# æœ€å·¦ã«è¡¨ç¤º
set-option -g status-left '#H:[#P]'

# Wi-Fiã€ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡ã€ç¾åœ¨æ™‚åˆ»
# æœ€å³ã«è¡¨ç¤º
set-option -g status-right '#(wifi) #(battery --tmux) %Y-%m-%d(%a) %H:%M:%S'


# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚’ Utf-8 ã«å¯¾å¿œ
#set-option -g status-utf8 on

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚’1ç§’æ¯ã«æç”»ã—ç›´ã™
set-option -g status-interval 1

# status line ã®èƒŒæ™¯è‰²ã‚’æŒ‡å®šã™ã‚‹ã€‚
#set-option -g status-bg "colour47"
set-option -g status-bg "colour208"

# status line ã®æ–‡å­—è‰²ã‚’æŒ‡å®šã™ã‚‹ã€‚
#set-option -g status-fg "colour255"
set-option -g status-fg "colour232"

# ã‚»ãƒ³ã‚¿ãƒ©ã‚¤ã‚ºï¼ˆä¸»ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç•ªå·ãªã©ï¼‰
set-option -g status-justify centre

# ãƒšã‚¤ãƒ³ã®å¢ƒç•Œç·šã®è‰²ã‚’è¨­å®š
# éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒšã‚¤ãƒ³ï¼šæ˜ã‚‹ã„ã‚°ãƒ¬ãƒ¼
set-option -g pane-border-style fg=colour250
# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒšã‚¤ãƒ³ï¼šé®®ã‚„ã‹ãªã‚ªãƒ¬ãƒ³ã‚¸ï¼ˆè‰²ç•ªå·ã‚’208ã«æˆ»ã—ã¦æ˜ã‚‹ã•ã‚’ä¸Šã’ã‚‹ï¼‰
set-option -g pane-active-border-style fg=colour208,bold
# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒšã‚¤ãƒ³ã®å¢ƒç•Œç·šã‚’å¤ªãã™ã‚‹ï¼ˆå¤ªç·šã‚’ä½¿ç”¨ï¼‰
set-option -g pane-border-lines heavy
# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒšã‚¤ãƒ³ã¯é€æ˜ã€éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒšã‚¤ãƒ³ã¯ã‚°ãƒ¬ãƒ¼ã£ã½ã
set-option -g window-active-style bg=terminal
set-option -g window-style bg=colour233

# ãƒšã‚¤ãƒ³ãƒœãƒ¼ãƒ€ãƒ¼ã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æƒ…å ±ã‚’è¡¨ç¤º
set-option -g pane-border-status bottom
set-option -g pane-border-format "#(~/.tmux/scripts/tmux-pane-border '#{pane_current_path}')"

# ãƒšã‚¤ãƒ³ç•ªå·è¡¨ç¤ºæ™‚é–“ã‚’é•·ãã™ã‚‹ (Ctrl-t qã§è¡¨ç¤ºã•ã‚Œã‚‹ç•ªå·ã®è¡¨ç¤ºæ™‚é–“)
set-option -g display-panes-time 3000


# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# ãƒã‚¦ã‚¹æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹
# ã“ã‚Œã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€Macã§Command+Cãªã©ãŒã§ããªããªã‚‹ãŒã€Optionã‚’æŠ¼ã—ãªãŒã‚‰ç¯„å›²é¸æŠã™ã‚‹ã¨ã€ã‚³ãƒ”ãƒ¼ã§ãã‚‹ã€‚
# http://qiita.com/jyotti/items/70a3a8035d767f99f93d
set-option -g mouse on

# Prefix keyã‚ï½‡æŠ¼ã•ã‚Œã¦ã„ã‚‹ã¨ãã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã«è‰²ã‚’ã¤ã‘ã‚‹
set-option -g status-left '#[fg=colour232,bg=colour214]#{?client_prefix,#[reverse],} #H[#S] #[default]'


# | ã§ãƒšã‚¤ãƒ³ã‚’ç«‹ã¦ã«åˆ†å‰²ã™ã‚‹
unbind %
bind | split-window -h -c "#{pane_current_path}"
if-shell '[[ "`tmux -V`" =~ 1\.8 ]]' 'bind | split-window -h'

# - ã§ãƒšã‚¤ãƒ³ã‚’æ¨ªã«åˆ†å‰²ã™ã‚‹
unbind '"'
bind - split-window -v -c "#{pane_current_path}"
if-shell '[[ "`tmux -V`" =~ 1\.8 ]]' 'bind - split-window -v'

## ãƒšã‚¤ã‚¹ãƒˆã®è¨­å®š
#set-option -g default-command "reattach-to-user-namespace -l bash"

# Vimã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ãƒšã‚¤ãƒ³ã‚’ç§»å‹•ã™ã‚‹
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vimã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ãƒšã‚¤ãƒ³ã‚’ãƒªã‚µã‚¤ã‚ºã™ã‚‹
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§viã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ã†
setw -g mode-keys vi

# ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®å…±æœ‰ã‚‚
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
#set-option -g default-command "reattach-to-user-namespace -l zsh"""

# openã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
#set -g default-command "reattach-to-user-namespace -l ${SHELL}\""
#set-option -g default-command ""

# synchronizeã®è¨­å®š
bind e setw synchronize-panes on
bind E setw synchronize-panes off

# gã§lazygitã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã
bind-key g display-popup -E -d "#{pane_current_path}" -h "95%" -w "95%" "PATH=/opt/homebrew/bin:$PATH /opt/homebrew/bin/lazygit"

# tmux-ai keybinding
bind-key a run-shell "~//work/other/tmux-ai/bin/tmux-ai"

# Git commit helper with Claude (COMMENTED OUT - using Codex instead)
# C-t m: Let Claude analyze git changes and suggest commit message
# bind-key m display-popup -E -d "#{pane_current_path}" -h "80%" -w "80%" "zsh -c 'source ~/.zshrc 2>/dev/null; echo \"ğŸ¤– ClaudeãŒgitã®å¤‰æ›´å†…å®¹ã‚’åˆ†æä¸­...\"; RESULT=\$(PATH=/opt/homebrew/bin:$PATH claude -p \"ç¾åœ¨ã®gitã®å¤‰æ›´å†…å®¹ã‚’åˆ†æã—ã¦ã€é©åˆ‡ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ—¥æœ¬èªã§1ã¤ã ã‘å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚Conventional Commitsã®å½¢å¼ã§ã€ç°¡æ½”ã§åˆ†ã‹ã‚Šã‚„ã™ã„æ—¥æœ¬èªã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚\"); CLEAN_RESULT=\$(printf \"%s\" \"\$RESULT\"); echo \"ğŸ“ ææ¡ˆã•ã‚ŒãŸã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:\"; printf \"%s\" \"\$CLEAN_RESULT\"; echo \"\\nğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ\"; printf \"%s\" \"\$CLEAN_RESULT\" | pbcopy; sleep 1'"

# Git commit helper with Codex CLI
# C-t m: Let Codex analyze git changes and suggest commit message
# Uses: codex exec with gpt-5.1-codex (fastest model for code tasks)
# Note: Analyzes only staged changes (git add) for commit message
bind-key m display-popup -E -d "#{pane_current_path}" -h "80%" -w "80%" "zsh -c 'source ~/.zshrc 2>/dev/null; echo \"ğŸ¤– Codex (gpt-5.1-codex) ãŒã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸå¤‰æ›´ã‚’åˆ†æä¸­...\"; GIT_DIFF=\$(git diff --staged 2>/dev/null); if [ -z \"\$GIT_DIFF\" ]; then echo \"âŒ ã‚¨ãƒ©ãƒ¼: ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸå¤‰æ›´ãŒã‚ã‚Šã¾ã›ã‚“ (git add ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„)\"; sleep 2; exit 1; fi; RESULT=\$(PATH=/opt/homebrew/bin:\$PATH codex exec -m gpt-5.1-codex \"git add ã§ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚ŒãŸå¤‰æ›´å†…å®¹ã®ã¿ã‚’åˆ†æã—ã¦ã€é©åˆ‡ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ—¥æœ¬èªã§1ã¤ã ã‘å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚Conventional Commitsã®å½¢å¼ï¼ˆfeat:, fix:, refactor: ãªã©ï¼‰ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚ãŸã ã—ã€ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆæ‹¬å¼§ã§å›²ã¾ã‚ŒãŸéƒ¨åˆ†ï¼‰ã¯å«ã‚ãšã€type: description ã®å½¢å¼ã®ã¿ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚ä¾‹: feat: æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã€fix: ãƒã‚°ã‚’ä¿®æ­£ã€‚ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ã‚’å‡ºåŠ›ã—ã€èª¬æ˜ã‚„è¿½åŠ æƒ…å ±ã¯ä¸è¦ã§ã™ã€‚ã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚Œã¦ã„ãªã„å¤‰æ›´ã¯ç„¡è¦–ã—ã¦ãã ã•ã„ã€‚\" 2>/dev/null); if [ -z \"\$RESULT\" ]; then echo \"âŒ ã‚¨ãƒ©ãƒ¼: Codexã‹ã‚‰ã®å¿œç­”ãŒç©ºã§ã™\"; sleep 2; exit 1; fi; CLEAN_RESULT=\$(printf \"%s\" \"\$RESULT\" | sed \"s/^[[:space:]]*//;s/[[:space:]]*\$//\" | head -1); echo \"ğŸ“ ææ¡ˆã•ã‚ŒãŸã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:\"; printf \"%s\" \"\$CLEAN_RESULT\"; echo \"\\nğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ\"; printf \"%s\" \"\$CLEAN_RESULT\" | pbcopy; sleep 2'"

# Claude Code /todos command shortcut
# C-t T: Execute /todos command in Claude Code
bind-key T send-keys "/todos" Enter

# VS Code ã‚’é–‹ã
# C-t v: Open VS Code in the current pane's directory
bind-key v display-popup -E -d "#{pane_current_path}" -h "10" -w "50" "PATH=/usr/local/bin:$PATH code ."

